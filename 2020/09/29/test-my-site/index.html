<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>test_my_site | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Maven 生命周期1.实例1符合预期？NO 打包成功，请求localhost:8080失败,后端请求成功 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777">
<meta property="og:type" content="article">
<meta property="og:title" content="test_my_site">
<meta property="og:url" content="http://example.com/2020/09/29/test-my-site/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="Maven 生命周期1.实例1符合预期？NO 打包成功，请求localhost:8080失败,后端请求成功 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2020-09-29T12:22:59.000Z">
<meta property="article:modified_time" content="2020-09-29T12:52:05.771Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/docs/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/docs/css/style.css">

<meta name="generator" content="Hexo 5.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/docs/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/docs/">Home</a>
        
          <a class="main-nav-link" href="/docs/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/docs/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-test-my-site" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/docs/2020/09/29/test-my-site/" class="article-date">
  <time datetime="2020-09-29T12:22:59.000Z" itemprop="datePublished">2020-09-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      test_my_site
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Maven-生命周期"><a href="#Maven-生命周期" class="headerlink" title="Maven 生命周期"></a>Maven 生命周期</h1><h2 id="1-实例1"><a href="#1-实例1" class="headerlink" title="1.实例1"></a>1.实例1</h2><p>符合预期？NO</p>
<p>打包成功，请求localhost:8080失败,后端请求成功</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;build&gt;</span><br><span class="line">    &lt;plugins&gt;</span><br><span class="line">      </span><br><span class="line">        &lt;!--资源插件，主要为了从前端项目里复制打包好的文件到springboot项目--&gt;</span><br><span class="line">        &lt;plugin&gt;</span><br><span class="line">            &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;</span><br><span class="line">            &lt;executions&gt;</span><br><span class="line"></span><br><span class="line">                &lt;execution&gt;</span><br><span class="line">                    &lt;id&gt;exec-npm-install&lt;/id&gt;</span><br><span class="line">                    &lt;phase&gt;generate-resources&lt;/phase&gt;</span><br><span class="line">                    &lt;goals&gt;</span><br><span class="line">                        &lt;goal&gt;exec&lt;/goal&gt;</span><br><span class="line">                    &lt;/goals&gt;</span><br><span class="line">                    &lt;configuration&gt;</span><br><span class="line">                        &lt;executable&gt;npm&lt;/executable&gt;</span><br><span class="line">                        &lt;arguments&gt;</span><br><span class="line">                            &lt;argument&gt;run&lt;/argument&gt;</span><br><span class="line">                            &lt;argument&gt;build&lt;/argument&gt;</span><br><span class="line">                        &lt;/arguments&gt;</span><br><span class="line">                        &lt;workingDirectory&gt;../doc-ui/&lt;/workingDirectory&gt;</span><br><span class="line">                    &lt;/configuration&gt;</span><br><span class="line">                &lt;/execution&gt;</span><br><span class="line"></span><br><span class="line">            &lt;/executions&gt;</span><br><span class="line">        &lt;/plugin&gt;</span><br><span class="line">  </span><br><span class="line">        &lt;!--资源插件，主要为了从前端项目里复制打包好的文件到springboot项目--&gt;</span><br><span class="line">        &lt;plugin&gt;</span><br><span class="line">            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;$&#123;maven.resource.version&#125;&lt;/version&gt;</span><br><span class="line">            &lt;executions&gt;</span><br><span class="line">                &lt;execution&gt;</span><br><span class="line">                    &lt;id&gt;copy static&lt;/id&gt;</span><br><span class="line">                    &lt;phase&gt;process-resources&lt;/phase&gt;</span><br><span class="line">                    &lt;goals&gt;</span><br><span class="line">                        &lt;goal&gt;copy-resources&lt;/goal&gt;</span><br><span class="line">                    &lt;/goals&gt;</span><br><span class="line">                    &lt;configuration&gt;</span><br><span class="line">                        &lt;outputDirectory&gt;../doc-center/src/main/resources/templates&lt;/outputDirectory&gt;</span><br><span class="line">                        &lt;overwrite&gt;true&lt;/overwrite&gt;</span><br><span class="line">                        &lt;resources&gt;</span><br><span class="line">                            &lt;resource&gt;</span><br><span class="line">                                &lt;!--因为vue-cli打包的目录在项目的根目录，所以从这里复制--&gt;</span><br><span class="line">                                &lt;directory&gt;../doc-ui/dist&lt;/directory&gt;</span><br><span class="line">                                &lt;includes&gt;</span><br><span class="line">                                    &lt;include&gt;css/&lt;/include&gt;</span><br><span class="line">                                    &lt;include&gt;img/&lt;/include&gt;</span><br><span class="line">                                    &lt;include&gt;js/&lt;/include&gt;</span><br><span class="line">                                    &lt;include&gt;favicon.ico&lt;/include&gt;</span><br><span class="line">                                &lt;/includes&gt;</span><br><span class="line">                            &lt;/resource&gt;</span><br><span class="line">                        &lt;/resources&gt;</span><br><span class="line">                    &lt;/configuration&gt;</span><br><span class="line">                &lt;/execution&gt;</span><br><span class="line">                &lt;execution&gt;</span><br><span class="line">                    &lt;id&gt;copy template&lt;/id&gt;</span><br><span class="line">                    &lt;phase&gt;process-resources&lt;/phase&gt;</span><br><span class="line">                    &lt;goals&gt;</span><br><span class="line">                        &lt;goal&gt;copy-resources&lt;/goal&gt;</span><br><span class="line">                    &lt;/goals&gt;</span><br><span class="line">                    &lt;configuration&gt;</span><br><span class="line">                        &lt;outputDirectory&gt;../doc-center/src/main/resources/templates&lt;/outputDirectory&gt;</span><br><span class="line">                        &lt;overwrite&gt;true&lt;/overwrite&gt;</span><br><span class="line">                        &lt;resources&gt;</span><br><span class="line">                            &lt;resource&gt;</span><br><span class="line">                                &lt;!--因为vue-cli打包的目录在项目的根目录，所以从这里复制--&gt;</span><br><span class="line">                                &lt;directory&gt;../doc-ui/dist&lt;/directory&gt;</span><br><span class="line">                                &lt;includes&gt;</span><br><span class="line">                                    &lt;include&gt;index.html&lt;/include&gt;</span><br><span class="line">                                    &lt;include&gt;static/&lt;/include&gt;</span><br><span class="line">                                &lt;/includes&gt;</span><br><span class="line">                            &lt;/resource&gt;</span><br><span class="line">                        &lt;/resources&gt;</span><br><span class="line">                    &lt;/configuration&gt;</span><br><span class="line">                &lt;/execution&gt;</span><br><span class="line">            &lt;/executions&gt;</span><br><span class="line">        &lt;/plugin&gt;</span><br><span class="line">    &lt;/plugins&gt;</span><br><span class="line">&lt;/build&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>执行输出：</p>
<p>[INFO] Scanning for projects…<br>[WARNING]<br>[WARNING] Some problems were encountered while building the effective model for com.bj58.fang:doc-center:jar:0.0.1-SNAPSHOT<br>[WARNING] ‘build.plugins.plugin.(groupId:artifactId)’ must be unique but found duplicate declaration of plugin org.springframework.boot:spring-boot-maven-plugin @ line 174, column 21<br>[WARNING] ‘build.plugins.plugin.version’ for org.codehaus.mojo:exec-maven-plugin is missing. @ line 151, column 21<br>[WARNING]<br>[WARNING] It is highly recommended to fix these problems because they threaten the stability of your build.<br>[WARNING]<br>[WARNING] For this reason, future Maven versions might no longer support building such malformed projects.<br>[WARNING]<br>[INFO]<br>[INFO] ———————-&lt; com.bj58.fang:doc-center &gt;———————-<br>[INFO] Building doc-center 0.0.1-SNAPSHOT<br>[INFO] ——————————–[ jar ]———————————<br>[INFO]<br><strong>[INFO] — exec-maven-plugin:3.0.0:exec (exec-npm-install) @ doc-center —</strong></p>
<blockquote>
<p><a href="mailto:&#100;&#x6f;&#x63;&#x2d;&#117;&#x69;&#64;&#x31;&#x2e;&#x30;&#46;&#48;">&#100;&#x6f;&#x63;&#x2d;&#117;&#x69;&#64;&#x31;&#x2e;&#x30;&#46;&#48;</a> build /Users/liujinxia/Downloads/project/58/apiDocCenter/doc-ui<br>node build/build.js</p>
</blockquote>
<p>Hash: db9972dbe868d8260780<br>Version: webpack 3.12.0<br>Time: 15625ms<br>                                                  Asset       Size  Chunks                    Chunk Names<br>                  static/js/app.0bae73f68f52e265aa30.js    35.8 kB       1  [emitted]         app<br>                static/fonts/element-icons.535877f.woff    28.2 kB          [emitted]<br>             static/img/fontawesome-webfont.912ec66.svg     444 kB          [emitted]  [big]<br>           static/fonts/fontawesome-webfont.b06871f.ttf     166 kB          [emitted]<br>           static/fonts/fontawesome-webfont.674f50d.eot     166 kB          [emitted]<br>          static/fonts/fontawesome-webfont.fee66e7.woff      98 kB          [emitted]<br>         static/fonts/fontawesome-webfont.af7ae50.woff2    77.2 kB          [emitted]<br>                            static/img/logo.fa1c045.png    19.7 kB          [emitted]<br>               static/js/vendor.6f4e3fae8959d663691f.js    1000 kB       0  [emitted]  [big]  vendor<br>                 static/fonts/element-icons.732389d.ttf      56 kB          [emitted]<br>             static/js/manifest.2ae2e69a05c33dfc65f8.js  857 bytes       2  [emitted]         manifest<br>    static/css/app.00068ce92adfface56aee0ba2af02093.css     266 kB       1  [emitted]  [big]  app<br>static/css/app.00068ce92adfface56aee0ba2af02093.css.map     383 kB          [emitted]<br>           static/js/vendor.6f4e3fae8959d663691f.js.map    3.88 MB       0  [emitted]         vendor<br>              static/js/app.0bae73f68f52e265aa30.js.map     153 kB       1  [emitted]         app<br>         static/js/manifest.2ae2e69a05c33dfc65f8.js.map    4.97 kB       2  [emitted]         manifest<br>                                             index.html  655 bytes          [emitted]<br>                                        static/logo.png    19.7 kB          [emitted]         </p>
<p>  Build complete.</p>
<p>  Tip: built files are meant to be served over an HTTP server.<br>  Opening index.html over file:// won’t work.</p>
<p>[INFO]<br><strong>[INFO] — maven-resources-plugin:3.2.0:resources (default-resources) @ doc-center —</strong><br>[INFO] Using ‘UTF-8’ encoding to copy filtered resources.<br>[INFO] Using ‘UTF-8’ encoding to copy filtered properties files.<br>[INFO] Copying 3 resources<br>[INFO]<br><strong>[INFO] — maven-resources-plugin:3.2.0:copy-resources (copy static) @ doc-center —</strong><br>[INFO] Using ‘UTF-8’ encoding to copy filtered resources.<br>[INFO] Using ‘UTF-8’ encoding to copy filtered properties files.<br>[INFO] Copying 0 resource<br>[INFO]<br><strong>[INFO] — maven-resources-plugin:3.2.0:copy-resources (copy template) @ doc-center —</strong><br>[INFO] Using ‘UTF-8’ encoding to copy filtered resources.<br>[INFO] Using ‘UTF-8’ encoding to copy filtered properties files.<br>[INFO] Copying 18 resources<br>[INFO]<br><strong>[INFO] — maven-compiler-plugin:3.8.1:compile (default-compile) @ doc-center —</strong><br>[INFO] Changes detected - recompiling the module!<br>[INFO] Compiling 24 source files to /Users/liujinxia/Downloads/project/58/apiDocCenter/doc-center/target/classes<br>[INFO] /Users/liujinxia/Downloads/project/58/apiDocCenter/doc-center/src/main/java/com/bj58/fang/doccenter/DocCenterApplication.java: /Users/liujinxia/Downloads/project/58/apiDocCenter/doc-center/src/main/java/com/bj58/fang/doccenter/DocCenterApplication.java使用或覆盖了已过时的 API。<br>[INFO] /Users/liujinxia/Downloads/project/58/apiDocCenter/doc-center/src/main/java/com/bj58/fang/doccenter/DocCenterApplication.java: 有关详细信息, 请使用 -Xlint:deprecation 重新编译。<br>[INFO] /Users/liujinxia/Downloads/project/58/apiDocCenter/doc-center/src/main/java/com/bj58/fang/doccenter/service/ProjectService.java: 某些输入文件使用了未经检查或不安全的操作。<br>[INFO] /Users/liujinxia/Downloads/project/58/apiDocCenter/doc-center/src/main/java/com/bj58/fang/doccenter/service/ProjectService.java: 有关详细信息, 请使用 -Xlint:unchecked 重新编译。<br>[INFO]<br><strong>[INFO] — maven-resources-plugin:3.2.0:testResources (default-testResources) @ doc-center —</strong><br>[INFO] Using ‘UTF-8’ encoding to copy filtered resources.<br>[INFO] Using ‘UTF-8’ encoding to copy filtered properties files.<br>[INFO] Copying 1 resource<br>[INFO]<br><strong>[INFO] — maven-compiler-plugin:3.8.1:testCompile (default-testCompile) @ doc-center —</strong><br>[INFO] Changes detected - recompiling the module!<br>[INFO] Compiling 8 source files to /Users/liujinxia/Downloads/project/58/apiDocCenter/doc-center/target/test-classes<br>[INFO]<br><strong>[INFO] — maven-surefire-plugin:2.12.4:test (default-test) @ doc-center —</strong><br>[INFO] Surefire report directory: /Users/liujinxia/Downloads/project/58/apiDocCenter/doc-center/target/surefire-reports</p>
<p> T E S T S<br>Running com.bj58.fang.doccenter.util.Base64Test<br>Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 sec</p>
<p>Results :</p>
<p>Tests run: 1, Failures: 0, Errors: 0, Skipped: 0</p>
<p>[INFO]<br><strong>[INFO] — maven-jar-plugin:2.4:jar (default-jar) @ doc-center —</strong><br>[INFO] Building jar: /Users/liujinxia/Downloads/project/58/apiDocCenter/doc-center/target/doc-center-0.0.1-SNAPSHOT.jar<br>[INFO]<br><strong>[INFO] — spring-boot-maven-plugin:2.3.0.RELEASE:repackage (repackage) @ doc-center —</strong><br>[INFO] Replacing main artifact with repackaged archive<br>[INFO]<br><strong>[INFO] — maven-install-plugin:2.4:install (default-install) @ doc-center —</strong><br>[INFO] Installing /Users/liujinxia/Downloads/project/58/apiDocCenter/doc-center/target/doc-center-0.0.1-SNAPSHOT.jar to /Users/liujinxia/.m2/repository/com/bj58/fang/doc-center/0.0.1-SNAPSHOT/doc-center-0.0.1-SNAPSHOT.jar<br>[INFO] Installing /Users/liujinxia/Downloads/project/58/apiDocCenter/doc-center/pom.xml to /Users/liujinxia/.m2/repository/com/bj58/fang/doc-center/0.0.1-SNAPSHOT/doc-center-0.0.1-SNAPSHOT.pom<br>[INFO] ————————————————————————<br>[INFO] BUILD SUCCESS<br>[INFO] ————————————————————————<br>[INFO] Total time:  23.858 s<br>[INFO] Finished at: 2020-09-25T16:23:07+08:00<br>[INFO] ————————————————————————</p>
<p>资源视图：包里面没有resources里面的资源</p>
<p>![image-20200925164452158](/Users/liujinxia/Library/Application Support/typora-user-images/image-20200925164452158.png)</p>
<h2 id="2-实例2"><a href="#2-实例2" class="headerlink" title="2.实例2"></a>2.实例2</h2><p>符合预期结果</p>
<p>index.html设置为默认的欢迎页，后端接口正常</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">    &lt;build&gt;</span><br><span class="line">        &lt;plugins&gt;</span><br><span class="line">   </span><br><span class="line">            &lt;!--资源插件，主要为了从前端项目里复制打包好的文件到springboot项目--&gt;</span><br><span class="line">            &lt;plugin&gt;</span><br><span class="line">                &lt;groupId&gt;org.codehaus.mojo&lt;&#x2F;groupId&gt;</span><br><span class="line">                &lt;artifactId&gt;exec-maven-plugin&lt;&#x2F;artifactId&gt;</span><br><span class="line">                &lt;executions&gt;</span><br><span class="line"></span><br><span class="line">                    &lt;execution&gt;</span><br><span class="line">                        &lt;id&gt;exec-npm-install&lt;&#x2F;id&gt;</span><br><span class="line">                        &lt;phase&gt;generate-resources&lt;&#x2F;phase&gt;</span><br><span class="line">                        &lt;goals&gt;</span><br><span class="line">                            &lt;goal&gt;exec&lt;&#x2F;goal&gt;</span><br><span class="line">                        &lt;&#x2F;goals&gt;</span><br><span class="line">                        &lt;configuration&gt;</span><br><span class="line">                            &lt;executable&gt;npm&lt;&#x2F;executable&gt;</span><br><span class="line">                            &lt;arguments&gt;</span><br><span class="line">                                &lt;argument&gt;run&lt;&#x2F;argument&gt;</span><br><span class="line">                                &lt;argument&gt;build&lt;&#x2F;argument&gt;</span><br><span class="line">                            &lt;&#x2F;arguments&gt;</span><br><span class="line">                            &lt;workingDirectory&gt;..&#x2F;doc-ui&#x2F;&lt;&#x2F;workingDirectory&gt;</span><br><span class="line">                        &lt;&#x2F;configuration&gt;</span><br><span class="line">                    &lt;&#x2F;execution&gt;</span><br><span class="line"></span><br><span class="line">                &lt;&#x2F;executions&gt;</span><br><span class="line">            &lt;&#x2F;plugin&gt;</span><br><span class="line">  </span><br><span class="line">            &lt;!--资源插件，主要为了从前端项目里复制打包好的文件到springboot项目--&gt;</span><br><span class="line">            &lt;plugin&gt;</span><br><span class="line">                &lt;groupId&gt;org.apache.maven.plugins&lt;&#x2F;groupId&gt;</span><br><span class="line">                &lt;artifactId&gt;maven-resources-plugin&lt;&#x2F;artifactId&gt;</span><br><span class="line">                &lt;version&gt;$&#123;maven.resource.version&#125;&lt;&#x2F;version&gt;</span><br><span class="line">                &lt;executions&gt;</span><br><span class="line">                    &lt;execution&gt;</span><br><span class="line">                        &lt;id&gt;copy static&lt;&#x2F;id&gt;</span><br><span class="line">                        &lt;phase&gt;generate-resources&lt;&#x2F;phase&gt;</span><br><span class="line">                        &lt;goals&gt;</span><br><span class="line">                            &lt;goal&gt;copy-resources&lt;&#x2F;goal&gt;</span><br><span class="line">                        &lt;&#x2F;goals&gt;</span><br><span class="line">                        &lt;configuration&gt;</span><br><span class="line">                            &lt;outputDirectory&gt;..&#x2F;doc-center&#x2F;src&#x2F;main&#x2F;resources&#x2F;templates&lt;&#x2F;outputDirectory&gt;</span><br><span class="line">                            &lt;overwrite&gt;true&lt;&#x2F;overwrite&gt;</span><br><span class="line">                            &lt;resources&gt;</span><br><span class="line">                                &lt;resource&gt;</span><br><span class="line">                                    &lt;!--因为vue-cli打包的目录在项目的根目录，所以从这里复制--&gt;</span><br><span class="line">                                    &lt;directory&gt;..&#x2F;doc-ui&#x2F;dist&lt;&#x2F;directory&gt;</span><br><span class="line">                                    &lt;includes&gt;</span><br><span class="line">                                        &lt;include&gt;css&#x2F;&lt;&#x2F;include&gt;</span><br><span class="line">                                        &lt;include&gt;img&#x2F;&lt;&#x2F;include&gt;</span><br><span class="line">                                        &lt;include&gt;js&#x2F;&lt;&#x2F;include&gt;</span><br><span class="line">                                        &lt;include&gt;favicon.ico&lt;&#x2F;include&gt;</span><br><span class="line">                                    &lt;&#x2F;includes&gt;</span><br><span class="line">                                &lt;&#x2F;resource&gt;</span><br><span class="line">                            &lt;&#x2F;resources&gt;</span><br><span class="line">                        &lt;&#x2F;configuration&gt;</span><br><span class="line">                    &lt;&#x2F;execution&gt;</span><br><span class="line">                    &lt;execution&gt;</span><br><span class="line">                        &lt;id&gt;copy template&lt;&#x2F;id&gt;</span><br><span class="line">                        &lt;phase&gt;generate-resources&lt;&#x2F;phase&gt;</span><br><span class="line">                        &lt;goals&gt;</span><br><span class="line">                            &lt;goal&gt;copy-resources&lt;&#x2F;goal&gt;</span><br><span class="line">                        &lt;&#x2F;goals&gt;</span><br><span class="line">                        &lt;configuration&gt;</span><br><span class="line">                            &lt;outputDirectory&gt;..&#x2F;doc-center&#x2F;src&#x2F;main&#x2F;resources&#x2F;templates&lt;&#x2F;outputDirectory&gt;</span><br><span class="line">                            &lt;overwrite&gt;true&lt;&#x2F;overwrite&gt;</span><br><span class="line">                            &lt;resources&gt;</span><br><span class="line">                                &lt;resource&gt;</span><br><span class="line">                                    &lt;!--因为vue-cli打包的目录在项目的根目录，所以从这里复制--&gt;</span><br><span class="line">                                    &lt;directory&gt;..&#x2F;doc-ui&#x2F;dist&lt;&#x2F;directory&gt;</span><br><span class="line">                                    &lt;includes&gt;</span><br><span class="line">                                        &lt;include&gt;index.html&lt;&#x2F;include&gt;</span><br><span class="line">                                        &lt;include&gt;static&#x2F;&lt;&#x2F;include&gt;</span><br><span class="line">                                    &lt;&#x2F;includes&gt;</span><br><span class="line">                                &lt;&#x2F;resource&gt;</span><br><span class="line">                            &lt;&#x2F;resources&gt;</span><br><span class="line">                        &lt;&#x2F;configuration&gt;</span><br><span class="line">                    &lt;&#x2F;execution&gt;</span><br><span class="line">                &lt;&#x2F;executions&gt;</span><br><span class="line">            &lt;&#x2F;plugin&gt;</span><br><span class="line">        &lt;&#x2F;plugins&gt;</span><br><span class="line">    &lt;&#x2F;build&gt;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;project&gt;</span><br></pre></td></tr></table></figure>





<p>[INFO] Scanning for projects…<br>[WARNING]<br>[WARNING] Some problems were encountered while building the effective model for com.bj58.fang:doc-center:jar:0.0.1-SNAPSHOT<br>[WARNING] ‘build.plugins.plugin.(groupId:artifactId)’ must be unique but found duplicate declaration of plugin org.springframework.boot:spring-boot-maven-plugin @ line 174, column 21<br>[WARNING] ‘build.plugins.plugin.version’ for org.codehaus.mojo:exec-maven-plugin is missing. @ line 151, column 21<br>[WARNING]<br>[WARNING] It is highly recommended to fix these problems because they threaten the stability of your build.<br>[WARNING]<br>[WARNING] For this reason, future Maven versions might no longer support building such malformed projects.<br>[WARNING]<br>[INFO]<br>[INFO] ———————-&lt; com.bj58.fang:doc-center &gt;———————-<br>[INFO] Building doc-center 0.0.1-SNAPSHOT<br>[INFO] ——————————–[ jar ]———————————<br>[INFO]<br><strong>[INFO] — exec-maven-plugin:3.0.0:exec (exec-npm-install) @ doc-center —</strong></p>
<blockquote>
<p><a href="mailto:&#100;&#111;&#x63;&#x2d;&#117;&#105;&#64;&#49;&#x2e;&#48;&#x2e;&#x30;">&#100;&#111;&#x63;&#x2d;&#117;&#105;&#64;&#49;&#x2e;&#48;&#x2e;&#x30;</a> build /Users/liujinxia/Downloads/project/58/apiDocCenter/doc-ui<br>node build/build.js</p>
</blockquote>
<p>Hash: 480b62d51244c190b944<br>Version: webpack 3.12.0<br>Time: 16044ms<br>                                                  Asset       Size  Chunks                    Chunk Names<br>                  static/js/app.0bae73f68f52e265aa30.js    35.8 kB       1  [emitted]         app<br>                static/fonts/element-icons.535877f.woff    28.2 kB          [emitted]<br>             static/img/fontawesome-webfont.912ec66.svg     444 kB          [emitted]  [big]<br>           static/fonts/fontawesome-webfont.b06871f.ttf     166 kB          [emitted]<br>           static/fonts/fontawesome-webfont.674f50d.eot     166 kB          [emitted]<br>          static/fonts/fontawesome-webfont.fee66e7.woff      98 kB          [emitted]<br>         static/fonts/fontawesome-webfont.af7ae50.woff2    77.2 kB          [emitted]<br>                            static/img/logo.fa1c045.png    19.7 kB          [emitted]<br>               static/js/vendor.6f4e3fae8959d663691f.js    1000 kB       0  [emitted]  [big]  vendor<br>                 static/fonts/element-icons.732389d.ttf      56 kB          [emitted]<br>             static/js/manifest.2ae2e69a05c33dfc65f8.js  857 bytes       2  [emitted]         manifest<br>    static/css/app.00068ce92adfface56aee0ba2af02093.css     266 kB       1  [emitted]  [big]  app<br>static/css/app.00068ce92adfface56aee0ba2af02093.css.map     383 kB          [emitted]<br>           static/js/vendor.6f4e3fae8959d663691f.js.map    3.88 MB       0  [emitted]         vendor<br>              static/js/app.0bae73f68f52e265aa30.js.map     153 kB       1  [emitted]         app<br>         static/js/manifest.2ae2e69a05c33dfc65f8.js.map    4.97 kB       2  [emitted]         manifest<br>                                             index.html  655 bytes          [emitted]<br>                                        static/logo.png    19.7 kB          [emitted]         </p>
<p>  Build complete.</p>
<p>  Tip: built files are meant to be served over an HTTP server.<br>  Opening index.html over file:// won’t work.</p>
<p>[INFO]<br><strong>[INFO] — maven-resources-plugin:3.2.0:copy-resources (copy static) @ doc-center —</strong><br>[INFO] Using ‘UTF-8’ encoding to copy filtered resources.<br>[INFO] Using ‘UTF-8’ encoding to copy filtered properties files.<br>[INFO] Copying 0 resource<br>[INFO]<br><strong>[INFO] — maven-resources-plugin:3.2.0:copy-resources (copy template) @ doc-center —</strong><br>[INFO] Using ‘UTF-8’ encoding to copy filtered resources.<br>[INFO] Using ‘UTF-8’ encoding to copy filtered properties files.<br>[INFO] Copying 18 resources<br>[INFO]<br><strong>[INFO] — maven-resources-plugin:3.2.0:resources (default-resources) @ doc-center —</strong><br>[INFO] Using ‘UTF-8’ encoding to copy filtered resources.<br>[INFO] Using ‘UTF-8’ encoding to copy filtered properties files.<br><strong>[INFO] Copying 21 resources</strong><br>[INFO]<br>[INFO] — maven-compiler-plugin:3.8.1:compile (default-compile) @ doc-center —<br>[INFO] Changes detected - recompiling the module!<br>[INFO] Compiling 24 source files to /Users/liujinxia/Downloads/project/58/apiDocCenter/doc-center/target/classes<br>[INFO] /Users/liujinxia/Downloads/project/58/apiDocCenter/doc-center/src/main/java/com/bj58/fang/doccenter/DocCenterApplication.java: /Users/liujinxia/Downloads/project/58/apiDocCenter/doc-center/src/main/java/com/bj58/fang/doccenter/DocCenterApplication.java使用或覆盖了已过时的 API。<br>[INFO] /Users/liujinxia/Downloads/project/58/apiDocCenter/doc-center/src/main/java/com/bj58/fang/doccenter/DocCenterApplication.java: 有关详细信息, 请使用 -Xlint:deprecation 重新编译。<br>[INFO] /Users/liujinxia/Downloads/project/58/apiDocCenter/doc-center/src/main/java/com/bj58/fang/doccenter/service/ProjectService.java: 某些输入文件使用了未经检查或不安全的操作。<br>[INFO] /Users/liujinxia/Downloads/project/58/apiDocCenter/doc-center/src/main/java/com/bj58/fang/doccenter/service/ProjectService.java: 有关详细信息, 请使用 -Xlint:unchecked 重新编译。<br>[INFO]<br>[INFO] — maven-resources-plugin:3.2.0:testResources (default-testResources) @ doc-center —<br>[INFO] Using ‘UTF-8’ encoding to copy filtered resources.<br>[INFO] Using ‘UTF-8’ encoding to copy filtered properties files.<br>[INFO] Copying 1 resource<br>[INFO]<br>[INFO] — maven-compiler-plugin:3.8.1:testCompile (default-testCompile) @ doc-center —<br>[INFO] Changes detected - recompiling the module!<br>[INFO] Compiling 8 source files to /Users/liujinxia/Downloads/project/58/apiDocCenter/doc-center/target/test-classes<br>[INFO]<br>[INFO] — maven-surefire-plugin:2.12.4:test (default-test) @ doc-center —<br>[INFO] Surefire report directory: /Users/liujinxia/Downloads/project/58/apiDocCenter/doc-center/target/surefire-reports</p>
<p> T E S T S</p>
<p>Running com.bj58.fang.doccenter.util.Base64Test<br>Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 sec</p>
<p>Results :</p>
<p>Tests run: 1, Failures: 0, Errors: 0, Skipped: 0</p>
<p>[INFO]<br>[INFO] — maven-jar-plugin:2.4:jar (default-jar) @ doc-center —<br>[INFO] Building jar: /Users/liujinxia/Downloads/project/58/apiDocCenter/doc-center/target/doc-center-0.0.1-SNAPSHOT.jar<br>[INFO]<br>[INFO] — spring-boot-maven-plugin:2.3.0.RELEASE:repackage (repackage) @ doc-center —<br>[INFO] Replacing main artifact with repackaged archive<br>[INFO]<br>[INFO] — maven-install-plugin:2.4:install (default-install) @ doc-center —<br>[INFO] Installing /Users/liujinxia/Downloads/project/58/apiDocCenter/doc-center/target/doc-center-0.0.1-SNAPSHOT.jar to /Users/liujinxia/.m2/repository/com/bj58/fang/doc-center/0.0.1-SNAPSHOT/doc-center-0.0.1-SNAPSHOT.jar<br>[INFO] Installing /Users/liujinxia/Downloads/project/58/apiDocCenter/doc-center/pom.xml to /Users/liujinxia/.m2/repository/com/bj58/fang/doc-center/0.0.1-SNAPSHOT/doc-center-0.0.1-SNAPSHOT.pom<br>[INFO] ————————————————————————<br>[INFO] BUILD SUCCESS<br>[INFO] ————————————————————————<br>[INFO] Total time:  24.194 s<br>[INFO] Finished at: 2020-09-25T16:37:53+08:00<br>[INFO] ————————————————————————</p>
<p>![image-20200925163850508](/Users/liujinxia/Library/Application Support/typora-user-images/image-20200925163850508.png)</p>
<p>boot日志：</p>
<p> liujinxia@liujinxiadeMacBook-Pro-2  ~/Downloads/project/58/apiDocCenter/doc-center   master  ls<br>1.txt     README.md docs      mvnw      mvnw.cmd  pom.xml   setup     src       target<br> liujinxia@liujinxiadeMacBook-Pro-2  ~/Downloads/project/58/apiDocCenter/doc-center   master  cd target<br> liujinxia@liujinxiadeMacBook-Pro-2  ~/Downloads/project/58/apiDocCenter/doc-center/target   master  java -jar doc-center-0.0.1-SNAPSHOT.jar </p>
<p>  .   <strong>__          _            __ _ _<br> /\ / _</strong>‘_ __ _ <em>(</em>)_ __  __ _ \ \ \ <br>( ( )___ | ‘_ | ‘<em>| | ‘</em> / <em>` | \ \ \ <br> \/  __</em>)| |<em>)| | | | | || (</em>| |  ) ) ) )<br>  ‘  |<strong>__| .</strong>|<em>| |</em>|<em>| |<em>\</em></em>, | / / / /<br> =========|<em>|==============|__</em>/=/<em>/</em>/_/<br> :: Spring Boot ::        (v2.3.0.RELEASE)</p>
<p>2020-09-25 16:39:03.785  INFO 25135 — [           main] c.b.fang.doccenter.DocCenterApplication  : Starting DocCenterApplication on liujinxiadeMacBook-Pro-2.local with PID 25135 (/Users/liujinxia/Downloads/project/58/apiDocCenter/doc-center/target/doc-center-0.0.1-SNAPSHOT.jar started by liujinxia in /Users/liujinxia/Downloads/project/58/apiDocCenter/doc-center/target)<br>2020-09-25 16:39:03.787 DEBUG 25135 — [           main] c.b.fang.doccenter.DocCenterApplication  : Running with Spring Boot v2.3.0.RELEASE, Spring v5.2.6.RELEASE<br>2020-09-25 16:39:03.788  INFO 25135 — [           main] c.b.fang.doccenter.DocCenterApplication  : The following profiles are active: dev<br>2020-09-25 16:39:05.056  INFO 25135 — [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFERRED mode.<br>2020-09-25 16:39:05.166  INFO 25135 — [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 98ms. Found 2 JPA repository interfaces.<br>2020-09-25 16:39:05.902  INFO 25135 — [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)<br>2020-09-25 16:39:05.917  INFO 25135 — [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]<br>2020-09-25 16:39:05.917  INFO 25135 — [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.35]<br>2020-09-25 16:39:05.999  INFO 25135 — [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext<br>2020-09-25 16:39:06.000  INFO 25135 — [           main] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 2142 ms<br>2020-09-25 16:39:06.393  INFO 25135 — [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService ‘applicationTaskExecutor’<br>2020-09-25 16:39:06.461  INFO 25135 — [           main] o.s.s.c.ThreadPoolTaskScheduler          : Initializing ExecutorService ‘taskScheduler’<br>2020-09-25 16:39:06.482  INFO 25135 — [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting…<br>2020-09-25 16:39:06.768  INFO 25135 — [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.<br>2020-09-25 16:39:06.920  INFO 25135 — [         task-1] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]<br>2020-09-25 16:39:07.407  INFO 25135 — [         task-1] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.4.15.Final<br>2020-09-25 16:39:07.607  INFO 25135 — [         task-1] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.0.Final}<br>2020-09-25 16:39:07.865  INFO 25135 — [         task-1] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect<br>2020-09-25 16:39:08.601  INFO 25135 — [         task-1] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]<br>2020-09-25 16:39:08.620  INFO 25135 — [         task-1] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit ‘default’<br>2020-09-25 16:39:09.005  INFO 25135 — [           main] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page: class path resource [templates/index.html]<br>2020-09-25 16:39:09.892  INFO 25135 — [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 13 endpoint(s) beneath base path ‘/actuator’<br>2020-09-25 16:39:09.950  INFO 25135 — [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path ‘’<br>2020-09-25 16:39:09.952  INFO 25135 — [           main] DeferredRepositoryInitializationListener : Triggering deferred initialization of Spring Data repositories…<br>2020-09-25 16:39:10.259  INFO 25135 — [           main] DeferredRepositoryInitializationListener : Spring Data repositories initialized!<br>2020-09-25 16:39:10.273  INFO 25135 — [           main] c.b.fang.doccenter.DocCenterApplication  : Started DocCenterApplication in 6.849 seconds (JVM running for 7.256)<br>2020-09-25 16:39:21.977  INFO 25135 — [nio-8080-exec-1] o.apache.tomcat.util.http.parser.Cookie  : A cookie header was received [1595556612; Phpstorm-cdd0dbef=4dd0f966-7368-4ed7-b558-b353678b85d8; Idea-7582bd0e=1190282e-dc00-4b57-8ddd-4a0d357dcc9a] that contained an invalid cookie. That cookie will be ignored.</p>
<h2 id="3-实例"><a href="#3-实例" class="headerlink" title="3. 实例"></a>3. 实例</h2><h3 id="正确的打包流程"><a href="#正确的打包流程" class="headerlink" title="正确的打包流程"></a>正确的打包流程</h3><p>——————-&lt; com.bj58.fang:doc-center &gt;———————-</p>
<p>(standard input):14:[INFO] ——————————–[ jar ]———————————</p>
<p>(standard input):16:[INFO] — exec-maven-plugin:3.0.0:exec (exec-npm-install) @ doc-center —</p>
<p>(standard input):50:[INFO] — maven-resources-plugin:3.2.0:copy-resources (copy static) @ doc-center —</p>
<p>(standard input):55:[INFO] — maven-resources-plugin:3.2.0:copy-resources (copy template) @ doc-center —</p>
<p>(standard input):60:[INFO] — maven-resources-plugin:3.2.0:resources (default-resources) @ doc-center —</p>
<p>(standard input):65:[INFO] — maven-compiler-plugin:3.8.1:compile (default-compile) @ doc-center —</p>
<p>(standard input):73:[INFO] — maven-resources-plugin:3.2.0:testResources (default-testResources) @ doc-center —</p>
<p>(standard input):78:[INFO] — maven-compiler-plugin:3.8.1:testCompile (default-testCompile) @ doc-center —</p>
<p>(standard input):82:[INFO] — maven-surefire-plugin:2.12.4:test (default-test) @ doc-center —</p>
<p>(standard input):85:——————————————————-</p>
<p>(standard input):87:——————————————————-</p>
<p>(standard input):96:[INFO] — maven-jar-plugin:2.4:jar (default-jar) @ doc-center —</p>
<p>(standard input):99:[INFO] — spring-boot-maven-plugin:2.3.0.RELEASE:repackage (repackage) @ doc-center —</p>
<p>(standard input):102:[INFO] — maven-install-plugin:2.4:install (default-install) @ doc-center –</p>
<h3 id="错误的打包流程："><a href="#错误的打包流程：" class="headerlink" title="错误的打包流程："></a>错误的打包流程：</h3><p><strong>[INFO] — exec-maven-plugin:3.0.0:exec (exec-npm-install) @ doc-center —</strong> generate-resource phrase<br>  <strong>[INFO] — maven-resources-plugin:3.2.0:resources (default-resources) @ doc-center —</strong><br><strong>[INFO] — maven-resources-plugin:3.2.0:copy-resources (copy static) @ doc-center —</strong><br><strong>[INFO] — maven-resources-plugin:3.2.0:copy-resources (copy template) @ doc-center —</strong><br><strong>[INFO] — maven-compiler-plugin:3.8.1:compile (default-compile) @ doc-center —</strong><br><strong>[INFO] — maven-resources-plugin:3.2.0:testResources (default-testResources) @ doc-center —</strong><br><strong>[INFO] — maven-compiler-plugin:3.8.1:testCompile (default-testCompile) @ doc-center —</strong><br><strong>[INFO] — maven-surefire-plugin:2.12.4:test (default-test) @ doc-center —</strong><br><strong>[INFO] — maven-jar-plugin:2.4:jar (default-jar) @ doc-center —</strong><br><strong>[INFO] — spring-boot-maven-plugin:2.3.0.RELEASE:repackage (repackage) @ doc-center —</strong><br><strong>[INFO] — maven-install-plugin:2.4:install (default-install) @ doc-center —</strong></p>
<h2 id="4-总结Apache-Maven-Resources-Plugin"><a href="#4-总结Apache-Maven-Resources-Plugin" class="headerlink" title="4.总结Apache Maven Resources Plugin"></a>4.总结Apache Maven Resources Plugin</h2><h3 id="default-Lifecycle"><a href="#default-Lifecycle" class="headerlink" title="default Lifecycle"></a><code>default</code> Lifecycle</h3><p><code>default</code> lifecycle is defined <strong>without</strong> any associated plugin. Plugin bindings for this lifecycle are <a target="_blank" rel="noopener" href="https://maven.apache.org/ref/3.6.3/maven-core/default-bindings.html">defined separately for every packaging</a>:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;phases&gt; </span><br><span class="line">&lt;phase&gt;validate&lt;/phase&gt;  </span><br><span class="line">&lt;phase&gt;initialize&lt;/phase&gt; </span><br><span class="line">**&lt;phase&gt;generate-sources&lt;/phase&gt; **</span><br><span class="line">&lt;phase&gt;process-sources&lt;/phase&gt; </span><br><span class="line">&lt;phase&gt;generate-resources&lt;/phase&gt;  </span><br><span class="line">**&lt;phase&gt;process-resources&lt;/phase&gt; **</span><br><span class="line">&lt;phase&gt;compile&lt;/phase&gt; </span><br><span class="line">&lt;phase&gt;process-classes&lt;/phase&gt; </span><br><span class="line">&lt;phase&gt;generate-test-sources&lt;/phase&gt; </span><br><span class="line">&lt;phase&gt;process-test-sources&lt;/phase&gt; </span><br><span class="line">&lt;phase&gt;generate-test-resources&lt;/phase&gt; </span><br><span class="line">&lt;phase&gt;process-test-resources&lt;/phase&gt;  </span><br><span class="line">&lt;phase&gt;test-compile&lt;/phase&gt;</span><br><span class="line">&lt;phase&gt;process-test-classes&lt;/phase&gt;</span><br><span class="line">&lt;phase&gt;test&lt;/phase&gt; </span><br><span class="line">&lt;phase&gt;prepare-package&lt;/phase&gt; </span><br><span class="line">&lt;phase&gt;package&lt;/phase&gt;  </span><br><span class="line">&lt;phase&gt;pre-integration-test&lt;/phase&gt; </span><br><span class="line">&lt;phase&gt;integration-test&lt;/phase&gt; </span><br><span class="line">&lt;phase&gt;post-integration-test&lt;/phase&gt; </span><br><span class="line">&lt;phase&gt;verify&lt;/phase&gt;  </span><br><span class="line">&lt;phase&gt;install&lt;/phase&gt; </span><br><span class="line">&lt;phase&gt;deploy&lt;/phase&gt;</span><br><span class="line">&lt;/phases&gt;</span><br></pre></td></tr></table></figure>



<p><a target="_blank" rel="noopener" href="http://maven.apache.org/plugins/maven-resources-plugin/index.html">http://maven.apache.org/plugins/maven-resources-plugin/index.html</a></p>
<p><strong>A build lifecycle made of phrases, a phrase is made of goals</strong></p>
<p>mvn clean install依次执行了clean、resources、compile、testResources、testCompile、test、jar(打包)、install等8个阶段。</p>
<p>执行mvn install ,install是一个phrase,会默认顺序执行上面的8个phrases.</p>
<p>每个phrase里面包括多个或者一个goal。</p>
<p>同一个phrase中的goal执行顺序，会根据pom中声明的顺序.「default未知」</p>
<p> {in the default phase (process-resources) with the default goal (resources) }</p>
<p>process-resources是resources的默认phrase。实例1 的定义方式，首先generate-sources比process-resources顺序前，所以先执行，</p>
<p>process-resources包括了copy static和copy templates两个以及默认的default resources。这种情况下看到的是default会先执行，然后根据另外两个的定义顺序分别执行,看到的效果就是虽然代码下面有了前端的静态资源文件，但是打的包里却没有，是因为default resource是真正执行打包拷贝的过程，而被放在了后面。</p>
<p><a target="_blank" rel="noopener" href="http://mail-archives.apache.org/mod_mbox/maven-dev/201105.mbox/%3C4DC87D9E.5010506@udo.edu%3E">The Maven development team has confirmed</a> that currently it is not possible to completely control the order of plugin execution within a phase, except by writing your own custom Lifecycle and using a custom Package Type.【by stackoverfloe】</p>
<p>同一个phrase里面的goal的执行顺序是否能确定尚未知晓。</p>
<p>but</p>
<p>In Maven 3.0.3 and later, there are two rules</p>
<ol>
<li>Plugin executions are ordered according to their phases. See <a target="_blank" rel="noopener" href="https://maven.apache.org/ref/current/maven-core/lifecycles.html">https://maven.apache.org/ref/current/maven-core/lifecycles.html</a> for the order of phases.</li>
</ol>
<p>For example, here mavin-plugin-1 is executed before maven-plugin-2 because the process-resources phase is defined as taking place before the compile phase.</p>
<p>2.If multiple executions have the same phase, then the first one to be executed will be the built-in one (e.g. maven-compiler-plugin) whose id is <strong>default-*something*</strong>, then the other executions will take place in the order they appear in your pom file.</p>
<p>从 Maven 3.0.3 开始同一个phrase里的顺序开始可控，也就是rule2说的。如果想改变这种情况，可以显示声明default的在后面：</p>
<p>【参考 <a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/8243912/changing-the-order-of-maven-plugin-execution%E3%80%91">https://stackoverflow.com/questions/8243912/changing-the-order-of-maven-plugin-execution】</a></p>
<p>The Resources Plugin has three goals:</p>
<p><a target="_blank" rel="noopener" href="http://maven.apache.org/plugins/maven-resources-plugin/resources-mojo.html">resources:resources</a> ，<a target="_blank" rel="noopener" href="http://maven.apache.org/plugins/maven-resources-plugin/testResources-mojo.html">resources:testResources</a>    ，<a target="_blank" rel="noopener" href="http://maven.apache.org/plugins/maven-resources-plugin/copy-resources-mojo.html">resources:copy-resources</a></p>
<p>If maven plug-ins are bound with same phase, then they executes in order of their listings within pom <code>maven-resources-plugin</code> is by default bounded to <code>process-resources</code> but it is declared in super pom and when you build, super pom, parent poms and current pom make up a single pom known as effective pom ( <em>you can check your effective pom via</em> <code>mvn help:effective-pom</code>)</p>
<p>证明：</p>
<p>获取真正生效的pom方法：</p>
<p> mvn help:effective-pom</p>
<p>得到输出：部分如下</p>
  <plugin>
        <artifactId>maven-resources-plugin</artifactId>
        <version>3.2.0</version>
        <executions>
          <execution>
            <id>default-testResources</id>
            <phase>process-test-resources</phase>
            <goals>
              <goal>testResources</goal>
            </goals>
          </execution>
          <execution>
            <id>default-resources</id>
            <phase>process-resources</phase>
            <goals>
              <goal>resources</goal>
            </goals>
          </execution>
          <execution>
            <id>copy static</id>
            <phase>process-resources</phase>
            <goals>
              <goal>copy-resources</goal>
            </goals>
            <configuration>
              <outputDirectory>../doc-center/src/main/resources/templates</outputDirectory>
              <overwrite>true</overwrite>
              <resources>
                <resource>
                  <directory>../doc-ui/dist</directory>
                  <includes>
                    <include>css/</include>
                    <include>img/</include>
                    <include>js/</include>
                    <include>favicon.ico</include>
                  </includes>
                </resource>
              </resources>
            </configuration>
          </execution>
          <execution>
            <id>copy template</id>
            <phase>process-resources</phase>
            <goals>
              <goal>copy-resources</goal>
            </goals>
            <configuration>
              <outputDirectory>../doc-center/src/main/resources/templates</outputDirectory>
              <overwrite>true</overwrite>
              <resources>
                <resource>
                  <directory>../doc-ui/dist</directory>
                  <includes>
                    <include>index.html</include>
                    <include>static/</include>
                  </includes>
                </resource>
              </resources>
            </configuration>
          </execution>
        </executions>
      </plugin>

<p>看到确实是default-resources定义在前，而且绑定的phrase是process-resources。所以会造成示例1的问题。</p>
<p>而示例2，把他们都定义在了generate-resources phrase下面，凑巧顺序满足了需求，所以产生了预期的结果。</p>
<h2 id="5-有用的命令"><a href="#5-有用的命令" class="headerlink" title="5.有用的命令"></a>5.有用的命令</h2><p>mvn help:effective-pom</p>
<p>查看当前生效的pom文件内容。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/09/29/test-my-site/" data-id="ckfnywsxf0001z496hq6z7tsy" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/docs/2020/09/29/hello-world/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Hello World</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/docs/archives/2020/09/">September 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/docs/2020/09/29/test-my-site/">test_my_site</a>
          </li>
        
          <li>
            <a href="/docs/2020/09/29/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/docs/" class="mobile-nav-link">Home</a>
  
    <a href="/docs/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/docs/fancybox/jquery.fancybox.css">

  
<script src="/docs/fancybox/jquery.fancybox.pack.js"></script>




<script src="/docs/js/script.js"></script>




  </div>
</body>
</html>